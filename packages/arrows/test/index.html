<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <title>Annotorious | Arrows Plugin</title>
  </head>

  <body>
    <div id="content">
      <div>
        <button id="tool">Annotate</button>
        <button id="arrow-mode" disabled>Draw</button>
      </div>
      <img id="sample-image" src="640px-Hallstatt.jpg" />
    </div>
    
    <script type="module">
      import { createImageAnnotator } from '@annotorious/annotorious';
      import { mountImagePlugin } from '../src';

      import '@annotorious/annotorious/annotorious.css';

      window.onload = function() {    
        const anno = createImageAnnotator('sample-image');

        const arrowsPlugin = mountImagePlugin(anno);

        const arrowModeBtn = document.getElementById('arrow-mode');
        arrowModeBtn.addEventListener('click', () => {
          if (arrowModeBtn.innerText === 'Draw') {
            arrowModeBtn.innerText = 'Select';
            arrowsPlugin.setMode('select');
          } else {
            arrowModeBtn.innerText = 'Draw';
            arrowsPlugin.setMode('draw');
          }
        });

        arrowsPlugin.on('createArrow', a => { 
          console.log(a);
          arrowsPlugin.setMode('select');
          arrowModeBtn.innerText = 'Select';
        });

        arrowsPlugin.on('selectArrow', a => console.log('selected', a));

        const toolBtn = document.getElementById('tool');
        toolBtn.addEventListener('click', () => {
          if (toolBtn.innerText === 'Annotate') {
            toolBtn.innerText = 'Arrows';
            arrowModeBtn.disabled = false;
            arrowsPlugin.setEnabled(true);
          } else {
            toolBtn.innerText = 'Annotate';
            arrowModeBtn.disabled = true;
            arrowsPlugin.setEnabled(false);
          }
        });
      }
    </script>
  </body>
</html>